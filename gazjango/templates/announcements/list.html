{% extends "base.html" %}
{% load extras %}

{% block title %}Announcements{% endblock title %}


{% block customheader %}

<link rel="stylesheet" href="{% static css page/story.css %}" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="{% static css page/job.css %}" type="text/css" media="screen, projection" />

{% jQuery %}

{% endblock customheader %}

{# TODO: change if we're only showing a specific date range #}
{# TODO: pagination #}


{% block topbar %}
  <div id="headerSectionBar">
    <div id="headerSearch">
      <form method="get" id="searchform" action="{% url search %}">
        Search:
        <input type="text" class="textbox" value="" name="s" id="s" />
        <input type="submit" id="searchsubmit" value="Go" />
      </form>
    </div>
  </div>
{% endblock topbar %}


{% block content %}
  <div id="commentColumn">
    <div id="commentBox">
      {% include "announcements/sidebar.html" %}
    </div>
  </div>

  <div id="storyBox">
    <div id="story">
      <h2>Announcements</h2>
        {% for announcement in announcements %}
          <div class="block">
            <h4><a href="{{ announcement.get_absolute_url }}">{{ announcement.title }}</a></h4>
            <br/>
            <div id="jobInfoList">
              <p><strong>Sponsor:</strong> {{ announcement.sponsor_link }}</p>
              {% if announcement.is_event %}
                <p>
                  <strong>When:</strong>
                  {{ announcement.event_date|near_future_date }}
                  {% if announcement.event_time %}
                    at {{ announcement.event_time }}
                  {% endif %}
                </p>
              {% if annnouncement.event_place %}
                <p><strong>Where:</strong> {{ announcement.event_place }}</p>
              {% endif %}
            {% endif %}
          </div>
          <p>{{ announcement.brief_excerpt|safe }}</p>
        </div>
      {% endfor %}
        
      <p>&nbsp;</p>         
    </div>

    <div id="shareBox">
      <div class="right">
        <strong>Share:</strong> {% add_this hover %}
      </div>
      <p>
        <a href="/announcements/">Announcements</a>
      </p>
    </div>

    <div id="continueBox">
      <div id="top">
        <a href="{{ topstory.get_absolute_url }}">
          <img src="{{ topstory.thumbnail.get_absolute_url }}" />
        </a>
        <div class="content">
          <h4><a href="{{ topstory.get_absolute_url }}">{{ topstory.get_title }}</a></h4>
          <p>{{ topstory.short_summary }}</p>
        </div>
      </div>

      <div id="more">
        <div class="box">
          <h4>Top Stories</h4>
          <ul>
            {% for story in stories %}
              <li><a href="{{story.get_absolute_url}}">{{ story.get_title|safe }}</a></li>
            {% endfor %}
          </ul>
        </div>
        <div class="box">
          <h4>Recent Comments</h4>
          <ul>
            {% for comment in comments|slice:":4" %}
              <li><a href="{{comment.get_absolute_url}}">{{ comment.subject.get_title|safe }}</a></li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>

{% endblock content %}
